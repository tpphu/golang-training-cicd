language: go
go:
  - 1.12.3
env:
  global:
  - secure: YlRtvrzosb+Gr6qBH/AMo/s1djldAB8U7G+j1MnoQiI5y9ZOh509xApOy2dochZbzBkRSluZi1zUrJJAQ4XPWOQVRy34uim+FfrhimBC5pYc0MCJBhDrBCbZr+7n0iwgvxseJ1GQ8qvAdUwRIDKSYnMPHsLl7dSM/1TB5OOdaXViEw4dDumOvF4pfQQ7TmhKD9eYNrGtV63D2vlizwqB0xT6W7FAReRcg1g+tDp7C9n19G379ZQHBu8CxBtTpd8UnGMeLTpTCvhVrqg81YvEPg1j7HM2pDh5qFpSpeTxmmXD6NGBUuKZBYQ/GflIPEG4NOG2CxjnY8tZpxrbQ5SBpFMHVX3p0thgh4iQDtsZRYXVoiPCcQpoOPuzuqjTwplPfP7ps5cB382HctyPHz58ZsfTQnAJUaYSa8EFQ9siltSA1vR4xljTWsmPqSfoA/+YGtoIdchffCeOHNsbziIQz0Y0TEvXpw3P3Rreb71mqpvMEdMwXC8ttmfxHQBrgOv1adHGlYJ793zm9RjiD3IlDCvnpilAcAHdoLau/T+51L7+9vp88HK3Fu7uea6uTA1UB0PWCIrcP6wDX73Ux7MSrifQvrRSBhr22D3Z39AEqPVdFdvTBFzAleJo7pe9vP1lILncfxnMME3lhfDmvDGI6fiGKYN0ERnOakQBBSBmcls=
  - secure: awAnX6jul5k2M0r2qZmVHH3I18dv/STMWD7sVjK8gSbxog+0PWDFE6yZpOq/DPd4kSN+k9jLNT0MudQoCbeqN8e+BAkOvyt7rczN4bm08jUU6OtTvnU5ODXcJimwoYFE74Ay2yuJ+jOwT3kC5TKarLwR3iifxlpQ+8op+QZm+K4yGyd0k8QOI8NeNVtVG4ZQ3MjjUc8mU7j1fXSVl4PCna1hMSeNKXMNcfNvSjZWXPg27EEG309Yu2XPoI081eqtzP53R1W2S5VyULBxpMADkJuobdWrcFzTqNsfRUZu3sZ9pVQ0e5sHKyNfkcx7tO9Aq5SVXK1tklbQyJUdJI2N3oflmBoLMs4Ljew4GkttXPAQzifEA63VokjIWdiXgpjvtMewi68hQFA5cLeNvrxtvJL/nFymYiqKgIxCIoiBVw/xEnKHpuisXtqMhajakLavc2z5g1O+CY1bEyArIY3rgGRONbfK9ejnTc6pTUxTowR/ePggGYcsbpUVwHKK39fWqt/0NRAAuIekbHkCa/BocOGBHj5PG4NLGdcNKbkmtI9s7h7v5utCwkcnrWIYjiySV6sgsx86nufmqO0ewdoCVFa+umqhpMt+wnO0v9Jsm5x1ZvdjWjVS60HxxogAg7CPZmfJM+p2XretJlMcvFFhL5jqY+r+srvKvJsf2aZ4LCw=
  - secure: Cq5rXu/vvY8Od1uf4VlgAxn4xTwdPFLkJ7Hvcke9xbW6NCwzz5SInPbU9rPOdU5v03w2tG1oAsIIMMy7+qjoaK3bI9QujyFyHau1N0ITipEqxzXVUU+xZFoRMhmJKBy0LSD32UNjR5F7s+MOl6DuI1pWVISHxDJTwKd3OVhzZlx0LF+hibGKnBelYgAhTAUvWFdmIWPCEl6DuhOh7ONoJokHr+xG4i1VcJsdTmAov7MWkB4Sg5tpS2M+Dhuf+hzRllAC53zdKF/VUEfdAZiozJVyW3UD1Cm96ENjrYPIcgJw9L0eq7qWtDMh7nMgOA2oOek9KULfOnyReFW1wIy8WdFDkDhINSySAoPvUJEWPejpyC88NRA7jFtBS9zJWP51wwGmWXaOVA4wGRokA+RPAqQUUqSfgW0QPKThjlxYdC7pGuuUHrVauTylI2MQTfKhkfzi65Y3aEIf2D8ISjv6D3HCzlKGNNGChHgQYMd6dUYf6rPOjJM1wQ8G1tBsmLxZvk1ZHjTs7jTsRyb5k43/bjGnwUfVqrcp+n+F6JTa2aQa/YN0mJ1xMkEzjxyriRIL5hWqSMOKHQf59k1MA+hT9brwM4bQnkOLymmCQnjEkKaySIOi8HbHi6XIl8JLe5kFCiYAhYctSSUlBfrOHUiYwTUlj9FSAGDCa0DZnGwpkSQ=
  - secure: I3kDFcIjNxKCKt5W98mj+4+oykl3YgyB2+h1cZblQ8xB7AUx8bNE6qmtQ2xf5G5sxm8PPAh07kqeTHtH1/mhGWMU0T0ozxEY/xZtVCm32yyWrU4ebqVeXcj26WbUGcAW+kssT8qZwxiK5kfzZAhPjYeyRSnhm46PALSi5st9XovAvlMGK9wuOlaQhHHiVcYVCDivhCe9hsbPEZhVJC05V6pLL5Hl5firzUof2eeAtBiTg/Mvok1PIMd3QTep8byTMCox+1Cnjq8rE9XufpJVbvxCCDGIohpTAwk2qsrHxRqkDBAnNaGqO5TxJKXZaN63F1y62TxK2u8l40AVNRbVu51rYs3O3HQxz1FMY779SKZAIs8woXDFfY7ywepMU9M9RWfK6uiSjIDTnI1QsRIlwby3NCAkOHu5tf/g+b5hkJssLZApMe0kYlrptSYqrDozkzD+2Zr4X9Lsqujlw/tzenNPDetL3NQLEIF6NDz6eKFMUlkGeDTkhyJ74fv6k7dnOR9RuvBeUbbuaBNRg7NMDR6tDynfNnqVvUle0plvif9MnC5eYYTLt0GyKCtprv4780TPdS7AN5NN25d+Fy81x7tQqGwQhREWVo5xROskvYjJl83EtIYScRZV60B1v8pYlYFYI143cJ+ZjkD1Twjh9LdzlbyDUUDbYV04QcHG4Z4=
script:
  - go test -v ./...
after_success:
  - mkdir bin
  - export SSHPASS=$DEPLOY_PASS
  - go build -o bin/golang-training-cicd -v .
  - sshpass -e scp bin/golang-training-cicd $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH/bin
  - sshpass ssh $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH ./run.sh
addons:
  apt:
    packages:
      - sshpass
deploy:
  provider: heroku
  app: tranquil-gorge-15185
  api_key:
    secure: b63df6f4-cfdd-436e-8b42-213d1b59559b
