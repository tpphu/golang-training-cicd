language: go
go:
  - 1.12.3
env:
  global:
    - secure: Ci20dCjFXrLb2O6sPcXL59qRaiB0+5vpLms4Ho8TxhAo63OsL5zINF++umGegq3zjNOYU0uPCfrU1T5tKcVYop1K3AZacLHKFrtY3yfrojGwZJaeapbnVDP0eoJpo6rUSuVpiZ0WyZkou6bVQ0LPMS8ueFVBQRfAPP1fxk2Tzq4/RSI0qaTI/dt3Bm6Ckzn/c/rXHAQACK5AsoJJMd5q6Z8TtzgnnrL4sC1aVOqUviW5hkIIAwCm7yhOWh8ckYeKup7nvYMXMy2XSnczfrpyCIgA+kpO1cqCtoRJSjd5KPoOZ1EM5NBY7fEWlS5YQADFG7WEVm+wgRRGJ63ao15PQ2tHhx2MqEqogIhEHINlTWGNL/TxuDOxdzqLtNlAVCmZwJ2dA8B1iNe3JjXbrSWn58oD5hJKMHzQOPAtl8++TcwkPfRGoOeMb3FH6FqVaPXeSpp5igskZOcMFB6a0cfRtfm3NvLr1/VDNBngR9hXOkYGlXa1WxVNMWTaEAlBPshTbS85j4BADXvaZjNUAWHR9q1MRmDVhRYK9Ua6CleDgAtPy3VXnvkB2oa8RP0j52SczH+PJQcI6/rVb673VtsBpwlEraIMVTEHCZy5NGwu/6sKnXUKQbrz9ax7GnSX5lPF7UoiNHW8zJs2P2jl7w8Uc9vVFjpDpD1ikDD5FJyppqs=
    - secure: EdjHFevLdvbBYRGZzawzS4osRnupRA6Wv43x+ZOVbwS+lNTHKy5uWWiCgsVKww53Sw6F5cOLEI+fedWOtWTw5fqd8eq3WxL+qsAKe9Cji+uQHzT6pP6n71SuBlbG2OxqpmJ9KrcGXLCnJOMfT9bgxFw65m2k7R0ZVaEa6PLMCJsYhcBp75rs6SZPz3Y+fq2DK/o3WBPqStJPz4F4gl6PNvE61UMIwMutx+jlRfOBzEnnhGww6iYjp4TLyaNk9VA/26s3zfXgvfvCwcXPd5Bhfy3ZVhAxzMwSxi3ezsip/aHHeqz128uwgRIRh8s9ZDrbm+FyQb/eVDHfD4pr1eE6wYwPcUH6Wa/ujO2sGn6thdyrxWGySXAU9Mk9Kvfr2t9Aeb85e4GMzFifz5Ey2k2cmdgMEJ77SoVUAQC0AEcsPK8ILouwt/inuYl0yvaFU2L2D+9CxhK4qL2ItazOBSdwH8ZNPPHEXaaZTFW7P3VAzTpTuXpGLKdwXpAmNns9JCvyQy3IxRFWtUO3xOoDdXY1zaFP06iOxFqz7JHRqwKgvuHclNY3itSDPvBsROELVJUE/PZo6G7AM8rRHRlo8T/FH6GTh4la5MxdBFnjyZElXbRcHUIWDxpL13upn40J3p13driJ0P5rE6ri9nrcskOFfW3yaSeG//CdzYv91xa5rO8=
    - secure: dgpu197H9KLwzPxV2o1uVCMXAtKmeEj242vZ6sacDLpf2Ote99nzPOZdT5v8IIKXaM89BW+S411ktIJuIV+JOwDQQ/wdzNyNvDn9d56XJkYmxjZ+aWljqKKRayI7ljioe5zld1l3lfvfzaBKXQ6GMFpJ6mrP9/NUzags1IVbYxkZBIRJANBDEViPk+v8T3qaAhaE76o4Gg1gu/ueZbrhn8RrUaSFOdKlWazCGk3eDq/nTfbZCAOTOfyPduypGOlISNG5GU3hux6rTT/G1dy9KfuWpHBemfY38jgVDrW82jXl5HSxHwk+KVHJd9XCq+QD/kiSlQ4t07qryPIRW9F97nvd8an25DUuZtPbQmdLNdHHaqz1jgRYIXA4bHWGOgpICYG718IH19MAJ6d7tMSB1nau2xQ8CEN+AfimDH0b6geUEjrLitpWq9GhPFfpuidqg4es2T90se1ncZAGL83O3UuDy5EUtYZ+upgLITJxljtAxDwTY8E7cyoUJVsd7dmh3DmvGIztujZbjrUJqGKA2TRGwQXJDInqxEz5kG5YhFXoeuafmiY0M9MkrlwMNqkKMK884v0LGsx1ga4vk/G9R3JPepIsI+XvnXxdPt7GcxSSDpCzB3X4ggJ54gcmCe9M4kavzmTTlFDBrMy9eZIKz1Np9pOwvTIJEJVxsHAASOo=
    - secure: k3ZOr+jL1H/Kq19at9Ci+D3w/rXyWFDKnKyT/10wiv5gMKh3lwLS6nktxGjSBLM0AytbH0Bth8/FJg+CqnnJLX4pRlkHpFbdSlKbF4l5kbCDRxbcxbJ+M8tEMM5J3x4hYLwBwr7Het0Jx+OC1CxhwLCdf3f4D3/4ZPRmtkpj9xHYJiEWBZCdpJGOb9VJ/76UXJJ3Dkz83uuqTI+3782R2Ip78YulMOtBI/2TYssQZX0PQozjhrm+kVBn91lbO7z7r/dKl4sbjeQSGH7eiWD3pAUZ6vwNS0XYSmsVFkmZfbFFYC+BIv15yOK2WWW+/4P3JggF5jUToHhzT4HD1HlHx7MSbUvvdpUKccwZ5D6oERAQquRu7TKBsnIzZj0gaEcAr3sL+vegyGHlkvQiClEwfbogOtBbJ8OrDZ6hZpbIC3UkNz40Vjrmmt4BT30ch5Rp46vwPCxOuQV8iBVSpjIgdyBXAzZseJdHYvFO9Qu7FJMN53s6R+EbqaBvRU0oyy7EdCA6YiH7OA0POZcdcSMtEFp8/kps02ha1LiPkpU17Aur2y+++gRAtSAU5RgQpZxPamKHuf4xNGkbhO/U6dSZ3dJiRdMGlm6AOVgaXHs3f6Ln8KF/XorE0Sg2jK/F7QRO+2kKwcmJTy9uBrD91OQadMEuHfBOpY7h030wNnzAWA0=
addons:
  apt:
    packages:
      - sshpass
script:
  - go test -v ./...
after_success:
  - mkdir bin
  - export SSHPASS=$DEPLOY_PASS
  - go build -o bin/golang-training-cicd -v .
  - sshpass -e scp bin/golang-training-cicd $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH/bin
  - sshpass ssh $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH ./run.sh
